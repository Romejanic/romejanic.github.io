function init(){var a=document.querySelector(".main");ctx=a.getContext("2d");var b=document.createElement("canvas");b.width=a.width,b.height=a.height-50,drawCtx=b.getContext("2d"),a.onmousemove=mouseMove,a.onmousedown=mouseDown,a.onmouseup=mouseUp,a.oncontextmenu=canOpenContext,document.body.oncontextmenu=canOpenContext,document.getElementById("downloadBtn").onclick=downloadCanvas,drawCtx.fillStyle="white",drawCtx.fillRect(0,0,drawCtx.canvas.width,drawCtx.canvas.height),drawCtx.fillStyle="black",drawCtx.font="20px Arial",drawCtx.fillText("In front of you is a canvas.",40,40),drawCtx.fillText("Moving your mouse paints under your cursor.",40,70),drawCtx.fillText("Moving your mouse while holding left click changes color.",40,90),drawCtx.fillText("Moving your mouse while holding right click changes brush size.",40,110),drawCtx.fillText("Make a drawing.",40,140),requestAnimationFrame(update)}function update(){ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),ctx.drawImage(drawCtx.canvas,0,0);var a=ctx.createLinearGradient(ctx.canvas.width,0,ctx.canvas.width,ctx.canvas.height);a.addColorStop(0,"rgba(204, 204, 204, 1.000)"),a.addColorStop(1,"rgba(94, 94, 94, 1.000)"),ctx.fillStyle=a,ctx.fillRect(0,ctx.canvas.height-50,ctx.canvas.width-50,50),ctx.fillStyle="red",ctx.fillRect(ctx.canvas.width-50,ctx.canvas.height-50,50,50),ctx.fillStyle="white",ctx.fillText("Color: ",12,ctx.canvas.height-20),ctx.fillText("Brush size: "+Math.floor(brushSize)+"px",132,ctx.canvas.height-20),ctx.fillText("Click to clear:",ctx.canvas.width-180,ctx.canvas.height-20),ctx.fillStyle="rgb("+colorR+","+colorG+","+colorB+")",ctx.fillRect(70,ctx.canvas.height-50,50,50),ctx.font="50px Arial",ctx.fillStyle=mouseOverClear?"white":"rgb(180,20,20)",ctx.fillText("!",ctx.canvas.width-32,ctx.canvas.height-7),ctx.font="20px Arial",ctx.fillStyle="black",ctx.fillRect(0,ctx.canvas.height-50,ctx.canvas.width,1),ctx.fillRect(70,ctx.canvas.height-50,1,50),ctx.fillRect(120,ctx.canvas.height-50,1,50),ctx.fillRect(ctx.canvas.width-50,ctx.canvas.height-50,1,50),rightClickDown&&(ctx.strokeStyle="black",ctx.beginPath(),ctx.arc(rightClickX,rightClickY,brushSize,0,2*Math.PI,!0),ctx.stroke()),requestAnimationFrame(update)}function mouseMove(a){var b=a.pageX-ctx.canvas.offsetLeft,c=a.pageY-ctx.canvas.offsetTop;if((lastX<0||lastY<0)&&(lastX=b,lastY=c),leftClickDown){var d=b/ctx.canvas.width,e=c/ctx.canvas.height;return colorR=Math.floor(255*d),colorG=Math.floor(255*e),void(colorB=Math.floor(255*(.5+.5*Math.sin(d+5*e))))}if(rightClickDown){var f=b-rightClickX,g=c-rightClickY;return void(brushSize=Math.max(Math.sqrt(f*f+g*g),1))}if(b>ctx.canvas.width-50&&b<ctx.canvas.width&&c>ctx.canvas.height-50&&c<ctx.canvas.height)return void(mouseOverClear=!0);mouseOverClear=!1;drawCtx.fillStyle="rgb("+colorR+","+colorG+","+colorB+")",drawCtx.beginPath(),drawCtx.arc(b,c,brushSize,0,2*Math.PI,!0),drawCtx.fill(),lastX=b,lastY=c}function mouseDown(a){0==a.button?mouseOverClear?(drawCtx.fillStyle="white",drawCtx.fillRect(0,0,ctx.canvas.width,ctx.canvas.height-50)):leftClickDown=!0:2!=a.button||mouseOverToolbar(a)||(rightClickDown=!0,rightClickX=a.pageX-ctx.canvas.offsetLeft,rightClickY=a.pageY-ctx.canvas.offsetTop)}function mouseUp(a){0==a.button?leftClickDown=!1:2==a.button&&(rightClickDown=!1),lastX=a.pageX,lastY=a.pageY}function downloadCanvas(){var a=document.getElementById("downloadBtn");a.href=drawCtx.canvas.toDataURL(),a.download="artwork.png"}function canOpenContext(a){a.preventDefault()}function mouseOverToolbar(a){return a.pageY>ctx.canvas.height-50&&a.pageY<ctx.canvas.height}var ctx,drawCtx,colorR=0,colorG=0,colorB=0,brushSize=3,leftClickDown=!1,rightClickDown=!1,mouseOverClear=!1,lastX=-1,lastY=-1;window.onload=init;